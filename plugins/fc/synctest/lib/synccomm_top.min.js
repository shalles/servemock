!function(a){function d(a){return"function"==typeof a}function e(a){this.list=[]}function f(a,b){return b.indexOf(a)>-1}function g(a,b){for(var c in b)if(f(a.ele,b[c].ele)&&f(a.type,b[c].type))return!0;return!1}function l(a,b){return a.target=b,a}function m(b){function d(b){if(!b)return c;if(b===a)c.push("window");else if(b===a.document)c.push("document");else if(b===document.body)c.push("body");else{if(b.id)return c.push("#"+b.id),c;b.classList&&b.classList.length?c.push("."+b.classList.toString().split(" ").join(".")):c.push(b.tagName),d(b.parentElement)}}var c=[];return d(b),c.reverse().join(">")}function n(b){b=JSON.parse(b);var c,d,e={},f=b.selector;if(g({ele:f,type:b.type},k))return{};switch(c="window"===f?a:document.querySelector(f),d=h[c[j]][b.type],l(e,c),b.type){case"input":c.value=b.value;break;case"focus":c.focus();break;case"scroll":c.scrollTop?(c.scrollTop=b.scrollTop,c.scrollLeft=b.scrollLeft):a.scrollTo(b.scrollLeft,b.scrollTop);break;case"click":c.tagName&&"a"===c.tagName.toLowerCase()&&-1===c.href.indexOf("javascript")&&(location.href=c.href)}switch(c.tagName&&c.tagName.toLowerCase()){case"input":c.value=b.value}return{event:e,type:b.type,ele:c,listeners:d}}function o(a,b){var c=a,d=m(c),e={selector:d,type:b.type};switch(b.type){case"input":e.value=c.value;break;case"scroll":e.scrollTop=c.scrollTop||scrollY,e.scrollLeft=c.scrollLeft||scrollX}switch(c.tagName&&c.tagName.toLowerCase()){case"input":e.value=c.value}return console.log(e),JSON.stringify(e)}function p(a){1===c.readyState&&c.send(a)}function q(a){var b,c,d,e;(b=a.ele)&&(c="__synctest_event",d=new Event(c),e=function(b){b.preventDefault(),a.listeners&&a.listeners.fire(b)},r.call(b,c,e),b.dispatchEvent(d),b.removeEventListener(c,e))}function s(a,b){a.addEventListener(b,function(a){console.log(b,a)},!1)}function t(a,b){for(var c=0,d=a.length;d>c;c++)s(a[c],b)}function u(a,b){for(var c=0,d=b.length;d>c;c++)s(a,b[c])}function v(a,b){for(var c=0,d=a.length;d>c;c++)u(a[c],b)}function w(){u(a,["scroll","resize"]);var b=document.querySelectorAll("a");b.length&&t(b,"click");var c=document.querySelectorAll("input"),d=document.querySelectorAll("textarea");c.length&&v(c,["input","focus"]),d.length&&v(d,["input","focus"])}a.__synctest={};var b="ws://{{ origin }}",c=new WebSocket(b);c.onopen=function(a){w(),console.log("[synctest start success]")},c.onclose=function(a){console.log("[synctest closed please check the server or refresh this page]")},c.onmessage=function(a){q(n(a.data))},c.onerror=function(a){console.log("[synctest closed please check the server or refresh this page]")},e.prototype={add:function(a){if(d(a))this.list.push(a);else if("[object Array]"===Object.prototype.toString.call(a))for(var b=0,c=a.length;c>b;b++)arguments.callee.call(this,a[b]);return this},fireWith:function(a,b){for(var c=this.list,d=0;d<c.length;d++)c[d].apply(a,b.slice?b.slice():b);return this},fire:function(){return this.fireWith(this,arguments),this}};var h={},i=0,j="synccommand_"+(new Date).getTime(),k=[{ele:["window","document"],type:["DOMContentLoaded","load"]}],r=EventTarget.prototype.addEventListener;a.addEventListener=EventTarget.prototype.addEventListener=function(a,b,c){var d=this;d[j]||(d[j]=++i),((h[i]||(h[i]={}))[a]||(h[i][a]=new e)).add(function(a){b.call(d,a)});var f=function(a){p(o(this,a)),b.call(this,a),a.preventDefault()};r.call(d,a,f,c)}}(window);
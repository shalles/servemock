<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>servermock transport plugin</title>
    <style>
        html, body, .container{
            width: 100%;
            height: 100%;
        }
        .container{
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            /*flex-flow: row nowrap;*/
            align-items: stretch;
            justify-content: space-between;
            align-content: stretch;
        }
        .receiver{
            flex: 1 1 50%;
        }
        .sender{
            flex: 1 1 50%;
        }
        .sender.active{
            background-color: rgba(125, 138, 33, .4);
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="receiver" class="receiver"></div>
        <div id="sender" class="sender"></div>
    </div>
    
    <script>
        var $receiver = document.querySelector('#receiver'),
            $sender = document.querySelector('#sender');

        // At the time of this writing, Firefox and Webkit disagree on the 
        // name of the createObjectURL() function
        var getBlobURL = (window.URL && URL.createObjectURL.bind(URL)) ||
            (window.webkitURL && webkitURL.createObjectURL.bind(webkitURL)) ||
            window.createObjectURL;
        var revokeBlobURL = (window.URL && URL.revokeObjectURL.bind(URL)) ||
            (window.webkitURL && webkitURL.revokeObjectURL.bind(webkitURL)) || window.revokeObjectURL;
        // When the document is loaded, add event handlers to the sender element 
        // so that it can handle drops of files
        window.onload = function() {
            // Find the element we want to add handlers to.
            var sender = document.getElementById("sender");
            // When the user starts dragging files over the sender, highlight it. 
            sender.ondragenter = function(e) {
                // If the drag is something other than files, ignore it.
                // The HTML5 dropzone attribute will simplify this when implemented. 
                var types = e.dataTransfer.types;
                if (!types ||
                    (types.contains && types.contains("Files")) ||
                    (types.indexOf && types.indexOf("Files") != -1)) {
                    sender.classList.add("active"); // Highlight sender
                    return false; // We're interested in the drag
                }
            };
            // Unhighlight the drop zone if the user moves out of it 
            sender.ondragleave = function() {
                sender.classList.remove("active");
            };
            // This handler just tells the browser to keep sending notifications 
            sender.ondragover = function(e) {
                return false;
            };
            // When the user drops files on us, get their URLs and display thumbnails. 
            sender.ondrop = function(e) {
                var files = e.dataTransfer.files;
                for (var i = 0; i < files.length; i++) {
                    var type = files[i].type;
                    if (type.substring(0, 6) !== "image/")
                        continue;
                    var img = document.createElement("img");
                    img.src = getBlobURL(files[i]);
                    img.onload = function() {
                        // The dropped files
                        // Loop through them all
                        // Skip any nonimages
                        // Create an <img> element 
                        // Use Blob URL with <img> 
                        // When it loads
                        // adjust its size and
                        // insert into document. 
                        // But don't leak memory!
                        // Unhighlight sender 
                        // We've handled the drop
                    }
                }
                this.width = 100;
                document.body.appendChild(this);
                revokeBlobURL(this.src);
                sender.classList.remove("active");
                return false;
            }
        };

        // Read the specified text file and 
        function readfile(f) {
            var reader = new FileReader(); 
            reader.readAsText(f); 
            reader.onload = function() {
                var text = reader.result;
                // display it in the <pre> element below
                // Create a FileReader object 
                // Read the file
                // Define an event handler
                // This is the file contents
                var out = document.getElementById("output"); 
                // Find output element 
                out.innerHTML = ""; 
                // Clear it 
                out.appendChild(document.createTextNode(text)); 
                // Display file contents
            }
            reader.onerror = function(e) { 
                // If anything goes wrong
                console.log("Error", e); 
                // Just log it 
            };
        }
    </script>
</body>
</html>